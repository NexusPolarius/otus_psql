# Настройка autovacuum с учетом особеностей производительности

## Подготовка к выполнению ДЗ
Создана ВМ в VirtualBox с ОС Ubuntu 20.04 с 2 ядрами и 4 Гб ОЗУ и SSD 10GB. Установлен PostgreSQL 15 с дефолтными настройками.

## Выполнение ДЗ
1. выполнить

> pgbench -i postgres

> pgbench -c8 -P 6 -T 60 -U postgres postgres
    
	<img src="/HW05/xxx/1.PNG" alt="def_conf.png" /> 
	
2. Применить параметры настройки PostgreSQL из прикрепленного к материалам занятия файла
   
> max_connections = 40

> shared_buffers = 1GB

> effective_cache_size = 3GB

> maintenance_work_mem = 512MB

> checkpoint_completion_target = 0.9

> wal_buffers = 16MB

> default_statistics_target = 500

> random_page_cost = 4

> effective_io_concurrency = 2

> work_mem = 65536kB

> min_wal_size = 4GB

> max_wal_size = 16GB
    
3. Протестировать заново  
    
	<img src="/HW05/xxx/2.PNG" alt="tun_conf.png" /> 

4. Что изменилось и почему?
   
На мой взгляд особо ни чего не изменилось.

5. Создать таблицу с текстовым полем и заполнить случайными или сгенерированными данным в размере 1млн строк

6. Посмотреть размер файла с таблицей

7. 5 раз обновить все строчки и добавить к каждой строчке любой символ

8. Посмотреть количество мертвых строчек в таблице и когда последний раз приходил автовакуум

9. Подождать некоторое время, проверяя, пришел ли автовакуум

10. 5 раз обновить все строчки и добавить к каждой строчке любой символ

11. Посмотреть размер файла с таблицей

12. Отключить Автовакуум на конкретной таблице

13. 10 раз обновить все строчки и добавить к каждой строчке любой символ

14. Посмотреть размер файла с таблицей

15. Объясните полученный результат

16. Не забудьте включить автовакуум)
