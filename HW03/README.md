# Установка и настройка PostgteSQL (физический уровень)

## Подготовка к выполнению ДЗ
Создана ВМ в VirtualBox с ОС Ubuntu 20.04, в которой установил postgresql-15. Создал и примонтировал новый диск в /mnt/data.

## Выполнение ДЗ
1. перенесите содержимое /var/lib/postgres/15 в /mnt/data - mv /var/lib/postgresql/15 /mnt/data. Попытайтесь запустить кластер - sudo -u postgres pg_ctlcluster 15 main start. Напишите получилось или нет и почему.
    
Запустить кластер не получилось т.к. в postgresql.conf параметр data_directory ссылается на путь /var/lib/postgresql/15/main по которому уже нет данных.
	
2. задание: найти конфигурационный параметр в файлах раположенных в /etc/postgresql/15/main который надо поменять и поменяйте его
напишите что и почему поменяли
   
В файле /etc/postgresql/15/main/postgresql.conf отредактировал параметр data_directory = '/mnt/data/15/main/' т.к. данные кластера теперь находятся по этому пути.
    
3. попытайтесь запустить кластер - sudo -u postgres pg_ctlcluster 15 main start. Напишите получилось или нет и почему.  
    
Запустить кластер получилось т.к. сделали правильные настройки к конфигурационном файле postgresql.conf 

4. зайдите через через psql и проверьте содержимое ранее созданной таблицы
   
   <img src="/HW03/xxx/1.PNG" alt="select_test.png" />
   
5. задание со звездочкой: не удаляя существующий инстанс ВМ сделайте новый, поставьте на его PostgreSQL, удалите файлы с данными из /var/lib/postgres, перемонтируйте внешний диск который сделали ранее от первой виртуальной машины ко второй и запустите PostgreSQL на второй машине так чтобы он работал с данными на внешнем диске, расскажите как вы это сделали и что в итоге получилось.

Создал новый инстанс ВМ в VirtualBox с ОС Ubuntu 20.04, в которой установил postgresql-15. В базе postgres ни каких таблиц нет:
   
   <img src="/HW03/xxx/2.PNG" alt="new_claster.png" />
  
Создаю каталог /mnt/data и делаю пользователя postgres его владельцем.

Перемонтировываю диск с $PGDATA от первого инстанса ВМ к новыму.

   <img src="/HW03/xxx/3.PNG" alt="mount.png" />
   
Исправляю в конфигурационном файле postgresql.conf параметр data_directory = '/mnt/data/15/main/' и перезапускаю кластер sudo -u postgres pg_ctlcluster 15 main restart

Проверяю появились ли данные

   <img src="/HW03/xxx/4.PNG" alt="data.png" />


